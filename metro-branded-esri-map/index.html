<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Metro Branded Esri Map</title>

    <!-- Load Leaflet from CDN -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

    <!-- Esri Leaflet and Esri Leaflet Vector -->
    <script src="https://unpkg.com/esri-leaflet/dist/esri-leaflet.js"></script>
    <script src="https://unpkg.com/esri-leaflet-vector@4/dist/esri-leaflet-vector.js"></script>


    <style>
        html, body, #map {
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
        }
    </style>

</head>
<body>
    <div id="map"></div>

    <script>
        // 1 year expiration limit
        // Expires on 11/1/2026
        const ESRI_KEY =  "AAPTxy8BH1VEsoebNVZXo8HurCIBEXS58hLwaInNH7mnZeFDQtLv6ne8Ndu9F_uhRYlc8RxqeU8UDdqtylajtTNbTo5zjQs945xeEEZtpBubS5Wh-pBin3OsPq7mKk8XZR-ORcBJEYmksiybUa8RtWgHXihoYo-iigBa9H8nAlgTKr-wVek78-XksiVdnwhUXS8gnB_ZXmHLzgI2mBGC18_etuTPMf0Zzkyzwv0XX7tSGGQ.AT1_iGEOXQH7";

        const basemapEnum = "65aff2873118478482ec3dec199e9058";
        //const basemapEnum = "bfc3028afac341499c40b8d2364db6c9";
        //const basemapStyle = `https://basemapstyles-api.arcgis.com/arcgis/rest/services/styles/v2/styles/items/${basemapEnum}?token=${ESRI_KEY}`;
        
        // Existing Metro Rail and Busway
        // https://lametro.maps.arcgis.com/home/item.html?id=17fc6859e51e4188b4a4120fcbd2e43d
        const mapImagery = 'https://tiles.arcgis.com/tiles/TNoJFjk1LsD45Juj/arcgis/rest/services/Map_RGB_Vector_Offset_RC5/MapServer';

        const map = L.map('map', {
            minZoom: 2
        }).setView([34.00095151499077, -118.25133692966446], 11);

        L.esri.Vector.vectorBasemapLayer(basemapEnum, {
            apiKey: ESRI_KEY
        }).addTo(map);

        let metroLayer = new L.esri.TiledMapLayer({
            url: mapImagery,
            apiKey: ESRI_KEY
        });

        metroLayer.addTo(map);
    </script>
</body>
</html>